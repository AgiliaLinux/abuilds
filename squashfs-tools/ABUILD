# ABUILD generated by spkg2abuild converter from squashfs-tools-4.0-1.spkg

# Package metadata
pkgname=squashfs-tools
pkgver=4.2
pkgbuild=1
arch="auto"

# Package description
shortdesc=("SquashFS tools")
longdesc=("Squashfs is a highly compressed read-only filesystem for Linux. Squashfs compresses both files, inodes and directories, and supports block sizes up to 1Mbytes for greater compression. It is implemented as a kernel module under VFS.")

# Source URL
source=("http://downloads.sourceforge.net/sourceforge/squashfs/squashfs${pkgver}.tar.gz")

# Tags
tags="sys-fs console"

build_deps="zlib lzo xz"


# Main build script
build() {
	go_src_dir
	burn_patches
	cd squashfs-tools
	sed -i 's|^#XZ_SUPPORT = 1|XZ_SUPPORT = 1|' Makefile
	sed -i 's|^#LZO_SUPPORT = 1|LZO_SUPPORT = 1|' Makefile
	make -j$NUMJOBS
	make install INSTALL_DIR=${pkgdir}/sbin
}
