# ABUILD generated by mkpkg_generator.sh

pkgname=gnupg
pkgver=2.0.20
pkgbuild=1
arch=("auto")

shortdesc=("gnupg (The GNU Privacy Guard)")
longdesc=("GnuPG is GNU's tool for secure communication and data storage. It can be used to encrypt data and to create digital signatures. It includes an advanced key management facility and is compliant with the proposed OpenPGP Internet standard as described in RFC2440.")

tags=("app-crypt network")
source=("ftp://ftp.gnupg.org/gcrypt/${pkgname}/${pkgname}-${pkgver}.tar.bz2")
build_deps="cyrus-sasl glibc-solibs openldap openssl-solibs libgcrypt libgpg-error libksba pth readline curl libusb libassuan"
conflicts="gnupg2"


BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
  --libdir=/usr/lib$LIBDIRSUFFIX \
  --mandir=/usr/man \
  --docdir=/usr/doc/${pkgname}-${pkgver} \
  --sysconfdir=/etc \
  --enable-maintainer-mode \
  --enable-symcryptrun \
  --enable-gpgtar"
INSTALL_KEYS="DESTDIR=$pkgdir"


after_build() {
  go_src_dir
  make check
  ln -s gpg2 "${pkgdir}"/usr/bin/gpg
  ln -s gpgv2 "${pkgdir}"/usr/bin/gpgv
  ln -s gpg2.1.gz "${pkgdir}"/usr/man/man1/gpg.1.gz
  rm "${pkgdir}/usr/share/gnupg/com-certs.pem" # FS#33059
}