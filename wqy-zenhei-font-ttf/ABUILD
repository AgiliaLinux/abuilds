# ABUILD generated by mkpkg_generator.sh

pkgname=wqy-zenhei-font-ttf
pkgver=0.9.45
pkgbuild=1
arch=("auto")

shortdesc=("wqy-zenhei-font-ttf (Wen Quan Yi Zen Hei CJK Font)")
longdesc=("The WenQuanYi Zen Hei font is a Chinese (or CJK) outline font with Hei Ti style (a sans-serif style) Hanzi glyphs. This font is developed for general purpose use of Chinese for formating, printing and on-screen display. This font is also targeted at platform independence and the utility for document exchange between various operating systems. wqy-zenhei-font-ttf home: http://wqy.sourceforge.net/en/")
tags=("media-fonts xserver")
source=("http://downloads.sourceforge.net/project/wqy/wqy-zenhei/$pkgver%20%28Fighting-state%20RC1%29/wqy-zenhei-$pkgver.tar.gz")
build_deps="fontconfig xorg-font-utils"

build() {
  go_src_dir
  burn_patches

  grep README -e "GPL v2 license with font embedding exception" -A 12 >| FONTEXCEPTION

  mkdir -p $pkgdir/usr/share/fonts/TTF/
  mkdir -p $pkgdir/etc/fonts/conf.avail/
  mkdir -p $pkgdir/etc/fonts/conf.d

  install -m644 -D FONTEXCEPTION $pkgdir/usr/share/licenses/${pkgname}/FONTEXCEPTION
  install -m644 *.ttc $pkgdir/usr/share/fonts/TTF/
  install -m644 *.conf $pkgdir/etc/fonts/conf.avail/
  install -m755 -D zenheiset $pkgdir/usr/sbin/zenheiset

  # https://bugs.archlinux.org/task/24177
  mv $pkgdir/etc/fonts/conf.avail/44-wqy-zenhei.conf $pkgdir/etc/fonts/conf.avail/65-wqy-zenhei.conf

  cd $pkgdir/etc/fonts/conf.d/
  ln -s ../conf.avail/65-wqy-zenhei.conf .
}
