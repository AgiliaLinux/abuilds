pkgname=junit
pkgver=4.11
pkgbuild=1
arch=('noarch')

shortdesc="Automated testing framework for Java"
source=("https://github.com/junit-team/junit/archive/r${pkgver}4.11.tar.gz")
tags="dev-java libs"
build_deps="apache-ant"
adddep="jre"


build()
{
  go_src_dir
  burn_patches
  cd "${srcdir}/${pkgname}${pkgver}"
  jar xf ${pkgname}-${pkgver}-src.jar
  rm -f ${pkgname}-${pkgver}-src.jar
  cp "${filedir}/build.xml" .
  find . -name \*.class -delete
  find . -name \*.jar -delete
  . /etc/profile.d/apache-ant.sh
  ant dist
  install -d "${pkgdir}/usr/share/java" 
  install -m644 junit4.4/junit.jar "${pkgdir}/usr/share/java"
  # Do this for ant, though ant needs to have these files in /usr/share/java, but that will get fixed later.
  #ln -sf ../share/java/junit.jar "${pkgdir}/usr/lib/junit.jar"
  install -D -m644 cpl-v10.html "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE.html"
}
