# ABUILD generated by mkpkg_generator.sh

pkgname=imlib
pkgver=1.9.15
pkgbuild=1
arch=("auto")

shortdesc=("imlib (image loading and rendering library)")
longdesc=("Imlib is a display depth-independent image loading and rendering library. Imlib is designed to simplify and speed up the process of loading images and obtaining X Window System drawables. Imlib provides many simple manipulation routines which can be used for common operations.")

tags=("libs media-libs")

source=("http://ftp.gnome.org/pub/GNOME/sources/imlib/1.9/${pkgname}-${pkgver}.tar.bz2")

build_deps="e2fsprogs glib glibc-solibs gtk+ libICE libSM libungif libX11 libXau libxcb libXdmcp libXext libXt libpng giflib"

before_build() {
  go_src_dir
  burn_patches
  sed '/AC_PATH_XTRA/d' -i configure.in
  libtoolize --force
  cp /usr/bin/libtool .
}

build() {
  go_src_dir
  autoreconf --force --install
  ./configure --prefix=/usr --sysconfdir=/etc --mandir=/usr/share/man --enable-shm --disable-static
  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
  make -j${numjobs}
}

after_build() {
  go_src_dir
  make DESTDIR="${pkgdir}" install
}
