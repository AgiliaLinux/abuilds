# ABUILD generated by mkpkg_generator.sh

pkgname=rpm5
pkgver=5.3.11
pkgbuild=1
_pkgrel=0
_pkgreldate=20110602
arch=("auto")

shortdesc=("rpm (RPM package format tool)")
longdesc=("RPM is a tool from Red Hat Software used to install and remove packages in the .rpm format. When installing RPM packages on Slackware, you may need to use the --nodeps and --force options. Before installing any binary package, it's wise to examine it to see what it's going to do, and if it will overwrite any files. You can use rpm2tgz to convert .rpm packages to .tgz packages so you can look them over.")
tags=("console app-arch")
source=("http://rpm5.org/files/$pkgname/$pkgname-5.3/$pkgname-$pkgver-$_pkgrel.$_pkgreldate.src.rpm")

build_deps="file glibc-solibs sqlite xz popt xz pcre zlib python beecrypt rpmextract"

before_build() {
  go_src_dir
  bsdtar -xf $pkgname-$pkgver.tar.gz
  cd ${pkgname}-${pkgver}
}

SLKLDFLAGS="${SLKLDFLAGS} -Wl,--no-as-needed"
BUILD_SYSTEM="autotools"
BUILD_KEYS="--prefix=/usr \
  --libdir=/usr/lib$LIBDIRSUFFIX \
  --mandir=/usr/man \
  --sysconfdir=/etc \
  --with-python \
  --with-python-inc-dir=/usr/include/python2.6 \
  --with-python-lib-dir=/usr/lib/python2.6 \
  --with-ruby=none \
  --without-selinux \
  --with-popt=/usr/lib$LIBDIRSUFFIX \
  --with-pcre=/usr/lib$LIBDIRSUFFIX \
  --with-bzip2=/usr/lib$LIBDIRSUFFIX \
  --with-xz=/usr/lib$LIBDIRSUFFIX \
  --with-file=/usr/lib$LIBDIRSUFFIX \
  --with-neon=none \
  --with-beecrypt=external \
  --disable-openmp \
  --disable-build-lafiles"

INSTALL_KEYS="DESTDIR=$pkgdir"
